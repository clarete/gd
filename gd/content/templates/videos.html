{% extends "base.html" %}

{% block css %}

{% endblock %}

{% block javascript %}
<script src="{{ url_for('static', filename='js/base/video.js') }}"></script>
{% endblock %}

{% block id %}
<div id="videos"></div>
{% endblock %}

{% block content %}
<div class="video-home">

  <div class="hidden-phone">
    <a href="#highlight-videos" data-slide="prev" class="seta pull-left">
      <i class="icon-angle-left icon-4x"></i>
    </a>
    <a href="#highlight-videos" data-slide="next" class="seta pull-right">
      <i class="icon-angle-right icon-4x"></i>
    </a>
  </div>

  <div class="container">
    {%if hvideos%}
    <div class="row hvideos hidden-phone">
      <div class="span12">
        <div id="highlight-videos" class="carousel slide">
          <!-- Carousel items -->
          <div class="carousel-inner">
            {%for video in hvideos%}
            <div class="{%if loop.first%}active{%endif%} item">
              <a href="/videos/{{video.id}}/">
                <img src="{{ thumborurl(video.thumbnail, (1200,350) ) }}" alt="{{video.title}}">
                <div class="capitions">
                  <h3><i class="icon-play"></i>{{video.title}}</h3>
                  <p>{{video.subtitle}}</p>
                </div>
              </a>
            </div>
            {%endfor%}
          </div>
        </div>
      </div>
    </div>
    {%endif%}

    <div class="row">
      <div class="span3">
        <div class="video-filter">
          <div class="filter">
            <a href=""><i class="icon-time icon-2x azul"></i><p>Recentes</p></a>
          </div>
          <div class="filter">
            <a href=""><i class="icon-star icon-2x amarelo"></i><p>Populares</p></a>
          </div>
          <div class="filter">
            <a href=""><i class="icon-th-large icon-2x vermelho"></i><p>Canais</p></a>
            <ul class="canais">
                <li><a href="/videos">Todos os vídeos</a></li>
                {%for cat in categories%}
                <li><a href="/videos/canal/{{cat.term_id}}">{{cat.name}}</a></li>
                {%endfor%}
            </ul>
          </div>
        </div>
      </div>

      <div class="span9">
        <div class="row subheader">
          <div class="span6">
            <div class="cat">
              <i class="icon-star"></i><p>Populares</p>
            </div>
          </div>
          <div class="span3 pull-right">
            <div class="controls gbusca">
              Encontre o vídeo que deseja
              <div class="input-append">
                <input class="searcher" id="inputIcon" type="text"
                placeholder="Ex: Interiorização ...">
                <script type="text/javascript">
                  $(document).ready(function() {
                    $('.searcher').typeahead({
                      source: [{%for t in titulos%}'{{t}}',{%endfor%}],
                      items: 8,
                      minLength: 2,
                      updater: function(item){
                        //Slugs é um dicionáraio que contém como chave o Título do vídeo, e como valor o id,
                        //para poder recdirecionar diretamente para a galeria.
                        ids = { {%for t in titulos%}
                                 '{{t}}':'{{titulos[t]}}',
                                {%endfor%} }
                        document.location = "/videos/" + ids[item]
                      }
                    });
                  });
                </script>
                <button class="btn" type="button">
                  <i class="icon-search icons-2x"></i>
              </button>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="span9">
            <ul class="thumbnails">
              {% for video in videos %}
              <li class="span3">
                <div class="thumbnail video">
                  <a href="/videos/{{video.id}}/">
                    <img src="{{ thumborurl(video.thumbnail, (270,152) )
                    }}" class="thumb" alt="{{video.title}}">
                  </a>
                  <div class="meta">
                    <a href="/videos/{{video.id}}/">
                      <strong>{{video.date | strftime() }}</strong>
                      <p>{{ video.title }} {%if
                      video.category_title%} ({{video.category_title}})
                      {%endif%} </p>
                    </a>
                  </div>
                </div>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
